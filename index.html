<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="fr">
<!--<![endif]-->

<head>

  <!-- Basic Page Needs
    ================================================== -->
  <meta charset="utf-8">
  <title>Simon KLOPFENSTEIN</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- CSS
    ================================================== -->

  <link rel="stylesheet" href="stylesheets/animate.css">
  <link rel="stylesheet" href="stylesheets/layout.css">
  <link rel="stylesheet" href="stylesheets/responsive.css">
  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">



  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">




  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
      <!-- Include all compiled plugins (below), or include individual files as needed -->
      <script src="bootstrap/js/bootstrap.min.js"></script>

  

  <!--[if IE 7]>
          <link rel="stylesheet" type="text/css" href="stylesheets/ie7.css">
  <![endif]-->
  <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

  <!-- Favicons
    ================================================== -->
  <link rel="shortcut icon" href="img/profile_photo.jpg">

</head>



<body>

<!-- Primary Page Layout
	================================================== --> 
     <!-- Start  Mobile & Tab Header-->
    <div class="rzm_mobile_header col-sm-12 col-xs-12 hidden-lg hidden-md">
        <div class="mob_nav  navbar navbar-inverse navbar-fixed-top" id="slide-nav">
        	
        	<!--<div class="navbar-header">
				 <a class="navbar-toggle"></a>
             </div>
			    -->

             <div id="slidemenu" class="navbar-default navbar-inverse">
                    <ul class="nav navbar-nav primary">
					            </br>
                      <li><a href="#home">Skills</a></li>
                      <li><a href="#formation">Education</a></li>
                      <li><a href="#projet">Projets</a></li>
                      <li><a href="#experience">Experience</a></li>
                      <li><a href="#about">Some More</a></li>
                  </ul>
             </div>
        </div>
    </div>
    <!-- End  Mobile & Tab Header-->
   


    <!-- Start outside-header -->
    <div class="rzm_outside-header" id="home">
    </div>
    <!-- End outside-header -->



    <!-- Start Outside Main -->
    <div class="outside-main" id="page-content">
  
  

  <!-- Start Main Container -->
  <div class="container">
    <div class="row">
      <div class="col-md-3 col-sm-12 rzm_profile_nav">
        <div class="sticky">
          <div class="logo">
            <img src="img/profile_photo.jpg" alt="profile_photo" class="img-responsive img-circle">
          </div>
            
          <!-- Start primary navigation -->
          <div class="rzm_main_menu hidden-sm hidden-xs">
            <ul class="primary">
                <li class="first"><a href="#home">Skills</a></li>
                <li><a href="#formation">Education</a></li>
                <li><a href="#projet">Projects</a></li>
		<li><a href="#experience">Experience</a></li>
                <li><a href="#about">Some More</a></li>
                <li><a href="#home" class="go_to_top">Top <i class="fa fa-arrow-up" aria-hidden="true"></i></a></li>
            </ul>  
          </div>
          <!-- End Primary navigation -->
        </div>
      </div>
  
    <div class="clearfix"></div>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
    <!-- Start Profile Section -->
    <section class="col-md-9 col-sm-12 col-xs-12 col-md-offset-3 first profile rez_about">
      <div class="rez_top_title">
      		<!-- <h1>Bonjour, je m'appelle Simon.</h1> -->
                <!-- <p>Je recherche un stage de 5 à 6 mois. Je suis en Master 2 Data science.</p>  -->
	      	<p>Hello, my name is Simon.</p>
		<p>This website is a showcase of my skills, experiences, and professional milestones.</p>	    	
      </div>

      
      <h1 class="title">Skills</h1>
     
      <!-- Start About section -->
      <div class="col-md-12 col-sm-12 col-xs-12  omega  about">
		
	<ul> 
	</br>
	    <li>
	        <h4>Programming Languages :</h4>
	        <h5>C++, Python, SQL, Java, Javascript</h5>
	    </li>
	</br>
	    <li>
	        <h4>Data Manipulation Libraries :</h4>
	        <h5>Numpy, Pandas, NetworkX</h5>
	    </li>
	</br>
	    <li>
	        <h4>Database Management System :</h4>
	        <h5>MySQL, PostgreSQL</h5>
	    </li>
	</br>
	    <li>
	        <h4>Data Visualization :</h4>
	        <h5>MATLAB, Power BI, D3js</h5>
	    </li>
	</br>
	    <li>
	        <h4>ML Library - Deep Learning Library :</h4>
	        <h5>Scikit-learn, TensorFlow</h5>
	    </li>
	</br>
	    <li>
	        <h4>Soft Skills :</h4>
	        <h5>Written Communication, Time Management, Public Speaking</h5>
	    </li>
	</br>
	    <li>
	        <h4>Languages :</h4>
	        <h5>English Level B2 <a href="https://www.etsglobal.org/fr/en/digital-score-report/28490E72DE963B9718712E401DF8DD04E2B5C0D826FE7AD1DEE31231A7CF9BDBdnZYKzl1QmRkZzJzVHgwbDlYdm9DSXU1Z0pDeW1ELzUxbmxtVXNOdmdOLzZvbitm" target="_blank"> (Toeic 835/990) </a>
			and French fluent</h5>
	    </li>
	</ul>


	   
      <!-- End About -->
      <div class="clear">
      </div>
    </section>
<!-- End About section -->
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
    
   
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
   <!-- Start Formation section -->
    <section class="col-md-9 col-sm-12 col-xs-12 col-md-offset-3 rzm_experience" id="formation">
      <h1 class="title">Education in France</h1>
	  
      <div id="rzm_timeline">

         <!--0 -->
        <div class="row rzm_timeline-movement">
            
          <div class="rzm_timeline-badge active_box">    
          </div>
      
          <div class="col-sm-6 col-xs-12 rzm_timeline-item">
              <div class="row">
                  <div class="col-sm-11 col-xs-12">
                      <div class="rzm_timeline-panel credits">
                          <ul class="rzm_timeline-panel-ul">
                              <li>2022 - 2023</li>
                          </ul>
                      </div></a>
                  </div>
              </div>
          </div>
      
          <div class="col-sm-6  col-xs-12 rzm_timeline-item">
              <div class="row">
                  <div class="col-sm-offset-1 col-sm-11 col-xs-12">
                      <div class="rzm_timeline-panel debits">
                          <ul class="rzm_timeline-panel-ul">
                            <li><span class="rzm_importo">Master 2 Data Science </a> </span> </li>
                            <li><span class="rzm_causale">Université Lyon 1</span> </li>
                          </ul>
                      </div>
                  </div>
              </div>
          </div>
        </div>

        <!--1 -->
        <div class="row rzm_timeline-movement">
		
	  <div class="rzm_timeline-badge ">    
          </div>
            
          <div class="col-sm-6 col-xs-12 rzm_timeline-item">
              <div class="row">
                  <div class="col-sm-11 col-xs-12">
                      <div class="rzm_timeline-panel credits">
                          <ul class="rzm_timeline-panel-ul">
                              <li>2021 - 2022</li>
                          </ul>
                      </div></a>
                  </div>
              </div>
          </div>
      
          <div class="col-sm-6  col-xs-12 rzm_timeline-item">
              <div class="row">
                  <div class="col-sm-offset-1 col-sm-11 col-xs-12">
                      <div class="rzm_timeline-panel debits">
                          <ul class="rzm_timeline-panel-ul">
                            <li><span class="rzm_importo"><a href="http://master-info.univ-lyon1.fr/M1/" target="_blank">Master 1 Informatique </a> </span> </li>
                            <li><span class="rzm_causale">Université Lyon 1</span> </li>
                          </ul>
                      </div>
                  </div>
              </div>
          </div>
        </div>


         <!--2 -->
        <div class="row rzm_timeline-movement">
        
            <div class="rzm_timeline-badge ">    
            </div>
        
            <div class="col-sm-6 col-xs-12 rzm_timeline-item">
                <div class="row">
                    <div class="col-sm-11 col-xs-12">
                        <div class="rzm_timeline-panel credits">
                            <ul class="rzm_timeline-panel-ul">
                                <li>2018 - 2021 </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        
            <div class="col-sm-6 col-xs-12  rzm_timeline-item">
                <div class="row">
                    <div class="col-sm-offset-1 col-sm-11 col-xs-12">
                        <div class="rzm_timeline-panel debits">
                            <ul class="rzm_timeline-panel-ul active">
				<li><span class="rzm_importo"><a href="https://sciences.univ-lyon1.fr/formation/licence-informatique" target="_blank" > Licence Informatique</a></span> </li>
                                <li><span class="rzm_causale">Université Lyon 1</span> </li> 
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
		
		
		
		    <!--3 -->
        <div class="row rzm_timeline-movement">
        
            <div class="rzm_timeline-badge ">    
            </div>
        
        
            <div class="col-sm-6 col-xs-12 rzm_timeline-item">
                <div class="row">
                    <div class="col-sm-11 col-xs-12">
                        <div class="rzm_timeline-panel credits">
                            <ul class="rzm_timeline-panel-ul">
                                <li>February 2021</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        
            <div class="col-sm-6  col-xs-12 rzm_timeline-item">
                <div class="row">
                    <div class="col-sm-offset-1 col-sm-11 col-xs-12">
                        <div class="rzm_timeline-panel debits">
                            <ul class="rzm_timeline-panel-ul">
				<li><span class="rzm_importo">Driving Licence</span> </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
		
		
		
        
        <!--4 -->
        
        <div class="row rzm_timeline-movement">
        
            <div class="rzm_timeline-badge ">    
            </div>
        
            <div class="col-sm-6 col-xs-12 rzm_timeline-item">
                <div class="row">
                    <div class="col-sm-11 col-xs-12">
                        <div class="rzm_timeline-panel credits">
                            <ul class="rzm_timeline-panel-ul">
                                <li>2017 - 2018 </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        
            <div class="col-sm-6  col-xs-12 rzm_timeline-item">
                <div class="row">
                    <div class="col-sm-offset-1 col-sm-11 col-xs-12">
                        <div class="rzm_timeline-panel debits">
                            <ul class="rzm_timeline-panel-ul">
                              <li><span class="rzm_importo">Baccalauréat Scientifique</span> </li>
                              <li><span class="rzm_causale">Lycée Ella Fitzgerald - Mention Bien</span> </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
		
		
        <!--5-->
        <div class="row rzm_timeline-movement">
        
            <div class="rzm_timeline-badge">    
            </div>
        
            <div class="col-sm-6 col-xs-12 rzm_timeline-item">
                <div class="row">
                    <div class="col-sm-11 col-xs-12">
                        <div class="rzm_timeline-panel credits">
                            <ul class="rzm_timeline-panel-ul">
                                <li>June 2015</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        
            <div class="col-sm-6  col-xs-12 rzm_timeline-item">
                <div class="row">
                    <div class="col-sm-offset-1 col-sm-11 col-xs-12">
                        <div class="rzm_timeline-panel debits">
                            <ul class="rzm_timeline-panel-ul">
                              <li><span class="rzm_importo">Prévention et Secours</br>Civiques de niveau 1</span> </li>
                              <li><span class="rzm_causale"> Premiers secours </span> </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
    
            
      </div>
    </div>
		
  </section>
  <!-- End Formation section -->
   
   
   
   


   
   <!-- Start Project section -->
    <section class="col-md-9 col-sm-12 col-xs-12 col-md-offset-3 rzm_client" id="projet">
    	<h1 class="title">Projects</h1>
        <p>Here are the projects I have developed as part of my education.</p>
        <small>Click on the image to view the code or details :</small>
        </br>
		</br>
		</br>
		
		<div class="roww">
			<div class="colonne">
			  <h3>Gyromite</h3>
			  <a href="https://forge.univ-lyon1.fr/p1802713/poo" target="_blank"> <img src="img/gyromite.png" width="250" > </a>
			  </br> Game - <b>Java</b>
			</div>

			<div class="colonne">
			  <h3>Google Playstore Analysis</h3>
			  <a href="https://colab.research.google.com/drive/1HrBZ71dZuJHPrIdd3t0UCfjgRw-nrJ_3?usp=sharing" target="_blank"> <img src="img/tag_auto_playstore.png" width="250" > </a>
			  </br>Data Visualisation, Machine Learning - <b>Python</b>
			</div>

     			 <!-- <div class="colonne">
			  <h3>Google Playstore Analysis</h3>
			  <a href="https://colab.research.google.com/drive/1HrBZ71dZuJHPrIdd3t0UCfjgRw-nrJ_3?usp=sharing" target="_blank"> <img src="img/tag_auto_playstore.png" width="250" > </a>
			  </br>Data Visualisation, Machine Learning - <b>Python</b>
			</div> -->


			<div class="colonne">
			  <h3>Spotify Analysis</h3>
			  <a href="https://colab.research.google.com/drive/1SQe816Y5M0ROAccwhNADMMamdhtMV18G" target="_blank"> <img src="img/spotify.png" width="200" > </a>
			  </br>Data Mining- <b>Python</b>
			</div>

			</br>
														  
			<div class="colonne">
			  <h3>Images Processing</h3>
			  <a href="https://forge.univ-lyon1.fr/p1803372/m1-analyse-image" target="_blank"> <img src="img/cathedrale.jpg" width="250" > </a>
			  </br>OpenCV - <b>C++</b>
			</div>


      			<div class="colonne">
			  <h3>ETL for Clinical Studies from the Australian Registry</h3>
			  <a href="https://anzctr.org.au/" target="_blank"> <img src="img/ANZCTR.png" width="500" > </a>
			  </br>ETL (Extract, transform, Load) - <b>Python</b>
			</div>

      			<div class="colonne">
       			  <h3>Data Visualization - <a href="https://simon-klop.github.io/Data-Viz" target="_blank"> Webpage Link  </a></h3>
			  <h4>Example : Number of Customers in a Bakery (Interactive Visualization)</h4>

       			 <input type="text" id="amount" style="border: 0; color: #FF0000; font-weight: bold;" size="100" />
        
      
     			 <div id="slider-range"></div>
			 <div id="number_clients"></div>
			 </br>Data Visualisation - <b>JavaScript, D3js</b>
       			 <a href="https://www.kaggle.com/datasets/akashdeepkuila/bakery" target="_blank"> <h4>Link to the Data Source</h4>  </a>

			</div>


		</div>
		
    </section>
   <!-- End Project section -->
   
   
   
   
  
   
 <!-- Start Experience section -->
<section class="col-md-9 col-sm-12 col-xs-12 col-md-offset-3 rzm_portfolio" id="experience">
  <h1 class="title">Experience</h1>
  <section class="filter-section">
    <p style="text-align:left;">
      <b>Internship</b>, Alstom - La Rochelle
      </br>
	Maintaining scripts for signal feature extraction and implementing condition-based monitoring algorithms to detect failures. Producing documentation for the scripts, data analysis, and the algorithms developed. Coding in Matlab and Python.
      </br>
      </br>
      <span style="float:right;">
        <i> February 28, 2023 - August 18, 2023</i>
      </span>
    </p>
    </br>
    </br>
    </br>
    </br>
    <p style="text-align:left;">
      <b>Internship</b>, Alstom - Villeurbanne
      </br>
      Addressing existing needs in the implementation of an IT tool for RAM (Reliability, Availability, Maintainability) engineers. Writing specifications.
      </br>
      </br>
      <span style="float:right;">
        <i> May 17, 2021 - August 13, 2021</i>
      </span>
    </p>
    </br>
    </br>
    </br>
    </br>
    <p style="text-align:left;">
      <b>Experiments</b>, CNRS - Ecully
      </br>
      Participating as a subject for research on economic behaviors.
      </br>
      </br>
      <span style="float:right;">
        <i>Several dates spanning from 2020 to 2022</i>
      </span>
    </p>
    </br>
    </br>
    </br>
    </br>
    <p style="text-align:left;">
      <b>Food Runner</b>, Intercontinental Hôtel-Dieu 5* - Lyon
      </br>
      I worked as a seasonal contract employee for three months, serving customers at the hotel's Épona restaurant. I was present during the opening period (June 4, 2019). We organized and improved the service with the team.
      </br>
      </br>
      Skills acquired:
      <li>Teamwork</li>
      <li>Task prioritization</li>
      <li>Stress management</li>
      </br>
      <span style="float:right;">
        <i> May 20, 2018 - August 31, 2018</i>
      </span>
    </p>
    </br>
  </section>
  <!-- End Experience Section--> 
</section>
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
  <!-- Start Plus section -->
<section class="col-md-9 col-sm-12 col-xs-12 col-md-offset-3 rzm_Testimonial" id="about">
  <h1 class="title">Some More About Me</h1>
  <div class="rzm_testimonial_content">
    <div id="carousel" class="carousel slide" data-ride="carousel"> <!-- Indicators -->
      <ol class="carousel-indicators">
        <li data-target="#carousel" data-slide-to="0" class="active"></li>
        <li data-target="#carousel" data-slide-to="1"></li>
        <li data-target="#carousel" data-slide-to="2"></li>
      </ol>
      <!-- Wrapper for slides -->
      <div class="carousel-inner">
        <div class="item active">
          <div class="row">
            <div class="col-xs-12">
              <div class="thumbnail adjust1">
                <div class="col-md-2 col-sm-2 col-xs-12"> <img class="media-object img-rounded img-responsive img-circle" src="img/saxo.jpg" alt=""> </div>
                <div class="col-md-10 col-sm-10 col-xs-12">
                  <div class="caption">
                    <p>I played the saxophone for 6 years in a conservatory.</p>
                    <blockquote class="adjust2">
                      <p>September 2010 - June 2016</p>
                      <small>Vienne, France</small> 
                    </blockquote>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="item">
          <div class="row">
            <div class="col-xs-12">
              <div class="thumbnail adjust1">
                <div class="col-md-2 col-sm-2 col-xs-12"> <img class="media-object img-rounded img-responsive " src="img/20160120_111830.jpg" alt=""> </div>
                <div class="col-md-10 col-sm-10 col-xs-12">
                  <div class="caption">
                    <p>The photo at the top of this website was taken during a trip to Norway.</p>
                    <blockquote class="adjust2">
                      <p>January 2016</p>
                      <small>Oslo, Norway</small> 
                    </blockquote>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="item">
          <div class="row">
            <div class="col-xs-12">
              <div class="thumbnail adjust1">
                <div class="col-md-2 col-sm-2 col-xs-12"> <img class="media-object img-rounded img-responsive " src="img/pasta.jpg" alt=""> </div>
                <div class="col-md-10 col-sm-10 col-xs-12">
                  <div class="caption">
                    <p>I really like Italian food.</p>
                    <blockquote class="adjust2">
                      <p>Present</p>
                      <small>France</small> 
                    </blockquote>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- End Plus section -->
   
 
 
 

  
 </div>
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 </div><!-- End Main Container-->
 </div> <!-- End Outside Main-->
 
  <!-- Start footer section -->
   		<section class="col-md-12 col-sm-12 col-xs-12 rzm_footer container-fluid">
        	<div class="container">
                <p>© 2023 Simon Klopfenstein - All Rights Reserved</p>
            </div>
        </section>
   <!-- End footer section -->
<!-- JS
	================================================== --> 

<script src="javascripts/jquery.tipsy.js"></script> 
<script src="javascripts/jquery.scrollTo-min.js" ></script> 
<script src="javascripts/jquery.localscroll-min.js" ></script> 
<script  src="javascripts/jquery.easing.1.3.js"></script> 
<script src="javascripts/script.js"></script> 


<!-- End Document
================================================== -->
</body>




<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://d3js.org/d3-array.v2.min.js"></script>


<!-- Load JQuey (for the double range slider that do not exist in d3.js)-->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="https://code.jquery.com/jquery-1.9.1.js"></script>
<script src="https://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>

<script>

  function BakeryViz1(dataset) {

      var width = document.getElementById("slider-range").clientWidth
      console.log(width)
      
      const margin = ({top: 35, right: 0, bottom: 35, left: 70})
      const w = width
      const h = 400
  
      var svg = d3.select("#number_clients").append("svg").attr("height", h).attr("width", w)
  
        
        // X label
        svg.append('text')
          .attr('x', w/2 - 30)
          .attr('y', h - margin.bottom +30)
          .attr('text-anchor', 'middle')
          .style('font-family', 'Helvetica')
          .style('font-size', 12)
          .text('Time');
          
          // Y label
          svg.append('text')
          .attr('text-anchor', 'middle')
          .attr('transform', 'translate(20,' + h/2 + ')rotate(-90)')
          .style('font-family', 'Helvetica')
          .style('font-size', 12)
          .text("Number of Customers");
  
  
      //console.log(my_map.map(d => d[1].map(j => j)).map(k => k[0].date) )
      //let test = [my_map.map(d => d[0]), my_map.map(d => d[1].map(j => j)).map(k => k[0].date)]
      //let test3 = d3.intersection(my_map.map(d => d[1].map(j => j)).map(k => k[0].date))
      //var myObject = [{ticket:my_map.map(d => d[0]), date:my_map.map(d => d[1].map(j => j)).map(k => k[0].date)}]
      //const myObject2 = d3.index(my_map, d => d[1].date)
      //console.log(my_map.map(d => d[1].map(j => j)).map(k => k[0].date))
  
  
  
      // X axis range init
      var x = d3.scaleTime().range([margin.left, w - margin.left - margin.right])
      var xAxis = svg.append("g").attr("transform", `translate(0,${h - margin.bottom})`)
                      //.domain([d3.min(buckets1.map(d => d.x0)),  d3.max(buckets1.map(d => d.x1))])
  
      // Y axis range init
      var y = d3.scaleLinear().range([h-margin.bottom, 0+margin.top])
      var yAxis = svg.append("g").attr("transform", `translate(${margin.left},0)`)
  
  
  
      function update(nbBins, startDate, endDate) {
          
          console.log("ici")
  
          var essai = d3.scaleTime().domain([startDate, endDate])
  
          const binX = d3.bin().domain(essai.domain()).thresholds(essai.ticks(nbBins))
          const bucketsX = binX(dataset.filter(s => s.date >= startDate && s.date <= endDate).map( d => d.date))
    
           
          x.domain([d3.min(bucketsX.map(d => d.x0)), d3.max(bucketsX.map(d => d.x1))])
          xAxis.transition()
               .duration(1000)
               .call(d3.axisBottom(x))
  
          // const bin = d3.bin().domain(x.domain()).thresholds(x.ticks(20));
          // const buckets_time = bin(dataset.map((d) => d.date));
  
          var my_map = d3.groups(dataset, d => d.ticket_number)
          var bin_for_tickets = d3.bin().domain(x.domain()).thresholds(x.ticks(nbBins));
          var buckets_nb_tickets = bin_for_tickets(my_map.map(d => d[1].map(j => j)).map(k => k[0].date))
  
          console.log(buckets_nb_tickets)
  
          // Y axis Update
          y.domain([0, d3.max(buckets_nb_tickets.map(d => d.length))])
          yAxis.transition()
               .duration(1000)
               .call(d3.axisLeft(y));
  
  
  
          // Join the rect with the bins data
          var current_rects = svg.selectAll("rect")
              .data(buckets_nb_tickets)
  
          current_rects.enter()
              .append("rect") 
              .merge(current_rects)
              .transition()
              .duration(1000)
              .attr("transform", d => "translate(" + x(d.x0) + "," + y(d.length) + ")" )
              .attr("width", d => x(d.x1) - x(d.x0) )
              .attr("height", d => h - y(d.length) - margin.bottom)
              .style("fill",  "red")
              .style("opacity", 0.6)
  
          // Removing rects not in use
          current_rects.exit()
              .remove()
      }
  
  
      //FIRST INIT
      let initStartDate = d3.min(dataset.map(d => d.date))
      let initEndDate = d3.max(dataset.map(d => d.date))
      update(10, initStartDate, initEndDate)
  
      
      //DYNAMIC
      // d3.select("#slider-range").on("click", function() {
      //     //Dates of the slider
      //     let arr = document.getElementById("amount").value.split(" - ")
      //     let parseTime = d3.timeParse("%a %b %d %Y");   
      //     let startDate = parseTime(arr[0])
      //     let endDate = parseTime(arr[1])
      //     //console.log(startDate)
      //     //console.log(endDate)
      //     update(30, startDate, endDate )
      // })
  
  
      //DYNAMIC (better with JQuery slider)
      const minDate = d3.min(dataset.map(d => d.date))
      const maxDate = d3.max(dataset.map(d => d.date))
      $("#slider-range").slider({
                  range: true,
                  min: new Date(minDate).getTime() / 1000,
                  max: new Date(maxDate).getTime() / 1000,
                  step: 86400,
                  values: [new Date(minDate).getTime() / 1000, new Date(maxDate).getTime() / 1000],
                  slide: function (event, ui) {
                      $("#amount").val((new Date(ui.values[0] * 1000).toDateString()) + " - " + (new Date(ui.values[1] * 1000)).toDateString());
                  },
                  change: function (event, ui) {
                      let arr = document.getElementById("amount").value.split(" - ")
                      let parseTime = d3.timeParse("%a %b %d %Y");   
                      let startDate = parseTime(arr[0])
                      let endDate = parseTime(arr[1])
                      update(30, startDate, endDate )
                  }
              })
              
      $("#amount").val((new Date($("#slider-range").slider("values", 0) * 1000).toDateString()) +
          " - " + (new Date($("#slider-range").slider("values", 1) * 1000)).toDateString())            
      
  }
  
  
  
  function conversor(d){
      const parseTime = d3.timeParse("%Y-%m-%d");
      d.date = parseTime(d.date)
      d.unit_price = +d.unit_price
      d.ticket_number = +d.ticket_number
      d.quantity = +d.quantity
      return d;
  }
  
  async function LoadBakeryAndDraw() {
      d3.csv(
          "https://simon-klop.github.io/Data-Viz/Bakery_clean.csv",
          conversor,
          function(data) {
              BakeryViz1(data)
          })
  }
  
  
  
  LoadBakeryAndDraw()
  
  
  
  </script>


</html>
